<div class="forgot-wrapper">
  <div class="falling-chars">
    <span
      *ngFor="let c of floatingChars"
      class="char"
      [style.left.%]="c.left"
      [style.animationDelay.s]="c.delay"
      [style.animationDuration.s]="c.duration"
    >
      {{ c.char }}
    </span>
  </div>

  <!-- Loading Overlay -->
  <div *ngIf="isLoading" class="loading-overlay">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <p>שולח בקשה...</p>
    </div>
  </div>

  <!-- Retry Toast Notification -->
  <div *ngIf="showRetryToast" class="retry-toast">
    <div class="toast-content">
      <div class="toast-message">
        <span class="error-icon">⚠️</span>
        <span>{{ toastMessage }}</span>
      </div>
      <div class="toast-actions">
        <button (click)="onRetry()" class="retry-button">
          נסה שוב
        </button>
        <button (click)="hideRetryToast()" class="close-button">
          ✕
        </button>
      </div>
    </div>
  </div>

  <div class="card-wrapper">
    <button class="back-btn" (click)="navigateBack()">חזור →</button>
    <img src="assets/images/reset-illustration.png" alt="illustration" class="side-img" />
    <form [formGroup]="forgotForm" (ngSubmit)="onSubmit()">
      <h2>שכחת סיסמה?</h2>
      <div>
        <label for="email">כתובת אימייל</label>
        <input id="email" type="email" formControlName="email">
        <div *ngIf="submitted && f['email'].errors">
          <small *ngIf="f['email'].errors['required']">שדה חובה</small>
          <small *ngIf="f['email'].errors['email']">כתובת לא תקינה</small>
        </div>
      </div>
      <button type="submit" [disabled]="isLoading">שלח קישור לאיפוס</button>
      
      <!-- Success Message -->
      <div *ngIf="message" class="message success">{{ message }}</div>
    </form>
  </div>
</div>