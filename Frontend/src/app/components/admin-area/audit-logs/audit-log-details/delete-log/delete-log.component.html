
<div *ngIf="selectedLog.action === 'DELETE' && selectedLog.entity_type === 'Ride'">
  <div class="data-card delete-data">
    <h4>驻专 住注 砖拽</h4>
    <div class="entity-fields">
      <div class="field-row">
        <div class="field-label"> 住注</div>
        <div class="field-value">{{ selectedLog.change_data.id }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">住 住注</div>
        <div class="field-value">{{ translateRideType(selectedLog.change_data.ride_type) }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">住住</div>
        <div class="field-value">{{ translateRideStatus(selectedLog.change_data.status) }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">拽 转</div>
        <div class="field-value">{{ getCityName(selectedLog.change_data.start_location) }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">注</div>
        <div class="field-value">{{ getCityName(selectedLog.change_data.destination) }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">转</div>
        <div class="field-value">{{ getCityName(selectedLog.change_data.stop) }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">转专 转</div>
        <div class="field-value">{{ selectedLog.change_data.start_datetime | date:'dd/MM/yyyy HH:mm' }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">转专 住</div>
        <div class="field-value">{{ selectedLog.change_data.end_datetime | date:'dd/MM/yyyy HH:mm' }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">专拽 注专 (拽")</div>
        <div class="field-value">{{ selectedLog.change_data.estimated_distance_km }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">专拽 驻注 (拽")</div>
        <div class="field-value">{{ selectedLog.change_data.actual_distance_km }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">拽转 专砖 注专</div>
        <div class="field-value">{{ selectedLog.change_data.license_check_passed ? '' : '' }}</div>
      </div>

      <div class="field-row">
        <div class="field-label"> 注"</div>
        <div class="field-value">{{ selectedLog.change_data.user_id }}</div>
      </div>

      <div class="field-row">
        <div class="field-label"> 专</div>
        <div class="field-value">{{ selectedLog.change_data.vehicle_id }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">专注 专</div>
        <div class="field-value">
          <ng-container *ngIf="selectedLog.change_data.emergency_event === null">-</ng-container>
          <ng-container *ngIf="selectedLog.change_data.emergency_event === true"></ng-container>
          <ng-container *ngIf="selectedLog.change_data.emergency_event === false"></ng-container>
        </div>
      </div>

      <div class="field-row">
        <div class="field-label"> 注" (override)</div>
        <div class="field-value">{{ selectedLog.change_data.override_user_id }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">转专 砖</div>
        <div class="field-value">{{ selectedLog.change_data.submitted_at | date:'dd/MM/yyyy HH:mm' }}</div>
      </div>
    </div>
  </div>
</div>

<!--  Deleted User -->
<div *ngIf="selectedLog.action === 'DELETE' && selectedLog.entity_type === 'User'">
  <div class="data-card delete-data">
    <h4>驻专 砖转砖 砖拽</h4>
    <div class="entity-fields">
      <div class="field-row">
        <div class="field-label">转驻拽</div>
        <div class="field-value">{{ translateUserRole(selectedLog.change_data.role) }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">拽</div>
        <div class="field-value">{{ getDepartmentNameById(selectedLog.change_data.department_id) }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">砖 砖转砖</div>
        <div class="field-value">{{ selectedLog.change_data.username }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">砖 驻专</div>
        <div class="field-value">{{ selectedLog.change_data.first_name }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">砖 砖驻</div>
        <div class="field-value">{{ selectedLog.change_data.last_name }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">住驻专 注</div>
        <div class="field-value">{{ selectedLog.change_data.employee_id }}</div>
      </div>

      <div class="field-row">
        <div class="field-label"></div>
        <div class="field-value">{{ selectedLog.change_data.email }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">驻</div>
        <div class="field-value">{{ selectedLog.change_data.phone || '-' }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">专砖 砖转</div>
        <div class="field-value">{{ selectedLog.change_data.has_government_license ? '' : '' }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">拽抓 专砖</div>
        <div class="field-value">
          <ng-container *ngIf="selectedLog.change_data.license_file_url; else noLicenseFile">
            <a [href]="selectedLog.change_data.license_file_url" target="_blank">拽抓 专砖</a>
          </ng-container>
          <ng-template #noLicenseFile> 拽</ng-template>
        </div>
      </div>

      <div class="field-row">
        <div class="field-label">转拽祝 专砖</div>
        <div class="field-value">
          <ng-container *ngIf="selectedLog.change_data.license_expiry_date; else noExpiryDate">
            {{ selectedLog.change_data.license_expiry_date | date:'dd/MM/yyyy' }}
          </ng-container>
          <ng-template #noExpiryDate> 拽</ng-template>
        </div>
      </div>
    </div>
  </div>
</div>

<!--  Deleted Vehicle -->
<div *ngIf="selectedLog.action === 'DELETE' && selectedLog.entity_type === 'Vehicle'">
  <div class="data-card delete-data">
    <h4>驻专 专 砖拽</h4>
    <div class="entity-fields">
      <div class="field-row">
        <div class="field-label">住驻专 专砖</div>
        <div class="field-value">{{ selectedLog.change_data.plate_number }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">住 专</div>
        <div class="field-value">{{ selectedLog.change_data.type }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">住住</div>
        <div class="field-value">{{ translateRideStatus(selectedLog.change_data.status) }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">住 拽</div>
        <div class="field-value">{{ translateFuelType(selectedLog.change_data.fuel_type) }}</div>
      </div>

      <div class="field-row">
        <div class="field-label"> 专</div>
        <div class="field-value">{{ selectedLog.change_data.vehicle_model }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">拽</div>
        <div class="field-value">{{ getDepartmentNameById(selectedLog.change_data.department_id) }}</div>
      </div>

      <div class="field-row">
        <div class="field-value">{{ selectedLog.change_data.mileage }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">转专 住 住</div>
        <div class="field-value">{{ selectedLog.change_data.lease_expiry | date:'dd/MM/yyyy' }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">住转 拽驻</div>
        <div class="field-value">{{ selectedLog.change_data.freeze_reason || '-' }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">驻专 拽驻</div>
        <div class="field-value">{{ selectedLog.change_data.freeze_details || '-' }}</div>
      </div>

      <div class="field-row">
        <div class="field-label">砖砖 专</div>
        <div class="field-value">
          {{ selectedLog.change_data.last_used_at ? (selectedLog.change_data.last_used_at | date:'dd/MM/yyyy HH:mm') : '-' }}
        </div>
      </div>

      <div class="field-row" *ngIf="selectedLog.change_data.image_url">
        <div class="field-label">转</div>
        <div class="field-value">
          <img [src]="selectedLog.change_data.image_url" alt="转转 专" style="max-height: 120px; max-width: 160px; border: 1px solid #ccc;" />
        </div>
      </div>
    </div>
  </div>
</div>
