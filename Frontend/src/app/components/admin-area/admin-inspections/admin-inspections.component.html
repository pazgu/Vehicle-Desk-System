<h2 class="section-title">בדיקות רכבים שבוצעו היום</h2>

<div *ngIf="loading" class="loading">טוען...</div>
<div *ngIf="!loading && inspections.length === 0" class="empty">אין בדיקות להצגה</div>


<div class="admin-inspections-container" *ngIf="!loading && inspections.length > 0">
  <div class="problematic-only-filter" dir="rtl">
  <button (click)="showProblematicFilters = !showProblematicFilters">
{{ showProblematicFilters ? 'הסתר אפשרויות סינון' : 'הצג בדיקות עם בעיות' }}
  </button>

  <div *ngIf="showProblematicFilters">
    <label style="display: block; margin-bottom: 0.5em;">
      <input type="checkbox" [(ngModel)]="showMediumIssues" (change)="loadInspections()" />
      הצג בעיות - דרגה בינונית
    </label>
    <label style="display: block;">
      <input type="checkbox" [(ngModel)]="showCriticalIssues" (change)="loadInspections()" />
      הצג בעיות - דרגה חריגה
    </label>
  </div>
</div>

  <table class="inspection-table">
    <thead>
      <tr>
        <th>📅 תאריך</th>
        <th>🧪 בודק</th>
        <th>📍 הערות</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of inspections" [class.highlight]="highlighted">
        <td>{{ item.inspection_date | date: 'short' }}</td>
        <td>{{ item.inspected_by }}</td>
        <td>
          {{ item.issues_found || 'לא דווחו בעיות' }}
        </td>
      </tr>
    </tbody>
  </table>
</div>
