<!-- <h2 class="section-title" *ngIf="!isCriticalMode">×‘×“×™×§×•×ª ×¨×›×‘×™× ×©×‘×•×¦×¢×• ×”×™×•×</h2>
<h2 class="section-title" *ngIf="isCriticalMode">×—×¨×™×’×•×ª</h2>

<div *ngIf="loading" class="loading">×˜×•×¢×Ÿ...</div>

<div class="admin-inspections-container" *ngIf="!loading">

  <div class="problematic-only-filter" dir="rtl">
    <button (click)="showProblematicFilters = !showProblematicFilters">
      {{ showProblematicFilters ? '×”×¡×ª×¨ ××¤×©×¨×•×™×•×ª ×¡×™× ×•×Ÿ' : '×”×¦×’ ×‘×“×™×§×•×ª ×¢× ×‘×¢×™×•×ª' }}
    </button>

    <div *ngIf="showProblematicFilters">
      <label style="display: block; margin-bottom: 0.5em;">
        <input type="checkbox" [(ngModel)]="showMediumIssues" (change)="loadInspections()" />
        ×”×¦×’ ×‘×¢×™×•×ª - ×“×¨×’×” ×‘×™× ×•× ×™×ª
      </label>
      <label style="display: block;">
        <input type="checkbox" [(ngModel)]="showCriticalIssues" (change)="loadInspections()" />
        ×”×¦×’ ×‘×¢×™×•×ª - ×“×¨×’×” ×—×¨×™×’×”
      </label>
    </div>
  </div>

  <div *ngIf="inspections.length === 0 && !anyFiltersSelected()" class="empty">
    ××™×Ÿ ×‘×“×™×§×•×ª ×œ×”×¦×’×”
  </div>

  <div *ngIf="inspections.length === 0 && anyFiltersSelected()" class="empty-filtered-results">
    ××™×Ÿ ×‘×“×™×§×•×ª ×ª×•×××•×ª ×œ×ª× ××™ ×”×¡×™× ×•×Ÿ ×©× ×‘×—×¨×•.
  </div>

  <table class="inspection-table" *ngIf="inspections.length > 0">
  <thead>
    <tr *ngIf="isCriticalMode">
      <th>ğŸ“… ×ª××¨×™×š</th>
      <th>ğŸ§¾ ×¡×•×’</th>
      <th>ğŸ‘¤ ××—×¨××™</th>
      <th>ğŸš— ×¨×›×‘</th>
      <th>ğŸ“ ×ª×™××•×¨</th>
    </tr>
    <tr *ngIf="!isCriticalMode">
      <th>ğŸ“… ×ª××¨×™×š</th>
      <th>ğŸ§ª ×‘×•×“×§</th>
      <th>ğŸ“ ×”×¢×¨×•×ª</th>
    </tr>
  </thead>
  <tbody>
<tr *ngFor="let item of inspections"
    [class.highlight]="highlighted"
    (click)="isCriticalMode ? loadIssueDetails(item) : selectedIssue = item">

      <td *ngIf="isCriticalMode">{{ item.timestamp | date: 'short' }}</td>
      <td *ngIf="isCriticalMode">{{ item.source_type }}</td>
      <td *ngIf="isCriticalMode">{{ item.responsible_user }}</td>
      <td *ngIf="isCriticalMode">{{ item.vehicle_info || 'â€”' }}</td>
      <td *ngIf="isCriticalMode">{{ item.issue_summary }}</td>

      <td *ngIf="!isCriticalMode">{{ item.inspection_date | date: 'short' }}</td>
      <td *ngIf="!isCriticalMode">{{ item.inspected_by }}</td>
      <td *ngIf="!isCriticalMode">{{ item.issues_found || '×œ× ×“×•×•×—×• ×‘×¢×™×•×ª' }}</td>
    </tr>
  </tbody>
</table>

<div class="modal-overlay" *ngIf="selectedIssueDetails && isCriticalMode" (click)="selectedIssueDetails = null">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="selectedIssueDetails = null">Ã—</button>

    <h3>ğŸ” ×¤×™×¨×•×˜ ×”×—×¨×™×’×”</h3>
    <p><strong>×ª×™××•×¨ ××œ×:</strong> {{ selectedIssueDetails.issue_text }}</p>
    <p><strong>×¨×›×‘:</strong> {{ selectedIssueDetails.vehicle_id || 'â€”' }}</p>
    <p><strong>××—×¨××™:</strong> {{ selectedIssueDetails.submitted_by }}</p>
    <p><strong>×ª××¨×™×š:</strong> {{ selectedIssueDetails.timestamp | date:'medium' }}</p>
    <p><strong>×¡×•×’:</strong> {{ selectedIssueDetails.type }}</p>
  </div>
</div>
</div> -->

<div *ngIf="loading" class="loading">×˜×•×¢×Ÿ...</div>

<div *ngIf="!loading" class="admin-inspections-container">
  <h1 style="text-align: right; color: #942222; margin-bottom: 1rem;">×—×¨×™×’×•×ª</h1>
  <div class="problematic-only-filter" dir="rtl">
    <button (click)="showProblematicFilters = !showProblematicFilters">
      {{ showProblematicFilters ? '×”×¡×ª×¨ ××¤×©×¨×•×™×•×ª ×¡×™× ×•×Ÿ' : '×”×¦×’ ×‘×“×™×§×•×ª ×¢× ×‘×¢×™×•×ª' }}
    </button>
    <div *ngIf="showProblematicFilters">
      <label style="display: block; margin-bottom: 0.5em;">
        <input type="checkbox" [(ngModel)]="showMediumIssues" (change)="loadData()" />
        ×”×¦×’ ×‘×¢×™×•×ª - ×“×¨×’×” ×‘×™× ×•× ×™×ª
      </label>
      <label style="display: block;">
        <input type="checkbox" [(ngModel)]="showCriticalIssues" (change)="loadData()" />
        ×”×¦×’ ×‘×¢×™×•×ª - ×“×¨×’×” ×—×¨×™×’×”
      </label>
    </div>
  </div>

  <!-- Inspections Table -->
  <ng-container *ngIf="filteredInspections.length > 0">
    <h2 style="text-align: right; color: #942222; margin-top: 2rem; margin-bottom: 1rem;">×‘×“×™×§×•×ª ×¨×›×‘×™×</h2>
    <table class="inspection-table">
      <thead>
        <tr>
          <th>×ª××¨×™×š</th>
          <th>×‘×•×“×§</th>
          <th>× ×§×™</th>
          <th>×“×œ×§ × ×‘×“×§</th>
          <th>××™×Ÿ ×—×¤×¦×™×</th>
          <th>×‘×¢×™×” ×§×¨×™×˜×™×ª</th>
          <th>×”×¢×¨×•×ª</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let insp of filteredInspections" (click)="naviagteToVehicle(insp.vehicle_id)">
          <td>{{ insp.inspection_date | date: 'short' }}</td>
          <td>{{ insp.inspected_by }}</td>
          <td>{{ insp.clean ? 'âœ”ï¸' : 'âŒ' }}</td>
          <td>{{ insp.fuel_checked ? 'âœ”ï¸' : 'âŒ' }}</td>
          <td>{{ insp.no_items_left ? 'âœ”ï¸' : 'âŒ' }}</td>
          <td>{{ insp.critical_issue_bool ? '×›×Ÿ' : '×œ×' }}</td>
          <td>{{ insp.issues_found || 'â€”' }}</td>
        </tr>
      </tbody>
    </table>
  </ng-container>

  <!-- Rides Table -->
  <ng-container *ngIf="rides.length > 0">
    <h2 style="text-align: right; color: #942222; margin-top: 2rem; margin-bottom: 1rem;">× ×¡×™×¢×•×ª ×¢× ××™×¨×•×¢ ×—×™×¨×•×</h2>
    <table class="inspection-table">
      <thead>
        <tr>
          <th>×ª××¨×™×š ×”×ª×—×œ×”</th>
          <th>× ×”×’</th>
          <th>×¡×˜×˜×•×¡</th>
          <th>××¨×—×§ ×‘×¤×•×¢×œ (×§"×)</th>
          <th>××™×¨×•×¢ ×—×™×¨×•×</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let ride of rides" (click)="naviagteToRide(ride.id)">
          <td>{{ ride.start_datetime | date: 'short' }}</td>
          <td>{{ ride.user_id }}</td>
          <td>{{ ride.status }}</td>
          <td>{{ ride.actual_distance_km }}</td>
          <td>{{ ride.emergency_event === 'true' ? '×›×Ÿ' : '×œ×' }}</td>
        </tr>
      </tbody>
    </table>
  </ng-container>

  <div *ngIf="filteredInspections.length === 0 && rides.length === 0" style="text-align: right; margin-top: 2rem;">××™×Ÿ × ×ª×•× ×™× ×œ×”×¦×’×”</div>
</div>

