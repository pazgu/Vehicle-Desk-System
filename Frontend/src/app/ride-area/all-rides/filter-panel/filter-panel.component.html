<div class="ride-filter-buttons">
  <button
    [ngClass]="{ active: rideViewMode === 'future' }"
    (click)="onRideViewModeChange('future')"
  >
    הצג נסיעות עתידיות
  </button>
  <button
    [ngClass]="{ active: rideViewMode === 'past' }"
    (click)="onRideViewModeChange('past')"
  >
    הצג נסיעות קודמות
  </button>
  <button
    [ngClass]="{ active: rideViewMode === 'all' }"
    (click)="onRideViewModeChange('all')"
  >
    הצג הכל
  </button>
</div>

<div class="filter-controls-bar">
  <div class="filter-left-section">
    <div class="sort-control">
      <label for="sort">מיין לפי: </label>
      <select
        id="sort"
        class="filter-select"
        [(ngModel)]="sortBy"
        (change)="onSortChange()"
      >
        <option value="recent">נוסף לאחרונה</option>
        <option value="date">תאריך</option>
        <option value="status">סטטוס</option>
      </select>
    </div>

    <button class="filter-btn" (click)="toggleFiltersVisibility()">
      <i class="pi pi-filter"></i>
      <span>{{ showFilters ? "הסתר סינון" : "הצג סינון" }}</span>
    </button>
  </div>

  <div class="status-indicators-inline">
    <div class="status-item">
      <span class="status-indicator approved"></span>
      <span>אושר</span>
    </div>
    <div *ngIf="!isVIP" class="status-item">
      <span class="status-indicator pending"></span>
      <span>ממתין לאישור</span>
    </div>
    <div class="status-item">
      <span class="status-indicator in_progress"></span>
      <span>בנסיעה</span>
    </div>
    <div *ngIf="!isVIP"  class="status-item">
      <span class="status-indicator rejected"></span>
      <span>נדחה</span>
    </div>
    <div class="status-item">
      <span class="status-indicator completed"></span>
      <span>בוצע</span>
    </div>
    <div class="status-item">
      <span class="status-indicator cancelled_due_to_no_show"></span>
      <span>בוטלה עקב אי-הגעה</span>
    </div>
    <div class="status-item">
      <span class="status-indicator cancelled_vehicle_unavailable"></span>
      <span> בוטל - רכב לא זמין</span>
    </div>
  </div>
</div>

<div *ngIf="showFilters" class="filters-panel">
  <div class="filters-row">
    <div class="filter-group">
      <label for="statusFilter">סטטוס:</label>
      <select
        id="statusFilter"
        class="filter-select"
        [(ngModel)]="statusFilter"
        (change)="onStatusFilterChange()"
      >
        <option value="">הצג הכל</option>
        <option value="אושר">אושר</option>
        <option value="ממתין לאישור">ממתין לאישור</option>
        <option value="בנסיעה">בנסיעה</option>
        <option value="נדחה">נדחה</option>
        <option value="בוצע">בוצע</option>
        <option value="בוטלה עקב אי-הגעה">בוטלה עקב אי-הגעה</option>
        <option value="בוטל - רכב לא זמין">בוטל - רכב לא זמין</option>
      </select>
    </div>

    <div class="date-input-group">
      <label for="startDate">החל מ:</label>
      <input
        id="startDate"
        type="date"
        class="filter-date"
        [(ngModel)]="startDate"
        [min]="minDate"
        [max]="maxDate"
        (change)="validateDate('start'); onDateChange(); validateDatesEndStart()"
      />
    </div>

    <div class="date-input-group">
      <label for="endDate">עד:</label>
      <input
        id="endDate"
        type="date"
        class="filter-date"
        [(ngModel)]="endDate"
        [min]="minDate"
        [max]="maxDate"
        (change)="validateDate('end'); onDateChange(); validateDatesEndStart()"
      />
    </div>
      <div *ngIf="dateError" style="color: red; margin-top: 5px">
          תאריך ההתחלה לא יכול להיות אחרי תאריך הסיום
        </div>

  </div>
</div>
