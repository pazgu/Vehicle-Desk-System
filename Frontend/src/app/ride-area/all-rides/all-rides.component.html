<div class="all-rides-container" dir="rtl">
  <button class="back-button" (click)="goBack()">
    <i class="pi pi-arrow-right"></i>
    חזור
  </button>

  <div class="page-header">
    <h1>כל הנסיעות שלי</h1>
  </div>

  <app-exceeded-warning-banner 
    [allOrders]="orders">
  </app-exceeded-warning-banner>

  <app-quota-indicator 
    [allOrders]="orders">
  </app-quota-indicator>

  <app-ride-filter-panel
    [allOrders]="orders"
    [rideViewMode]="rideViewMode"
    [sortBy]="sortBy"
    [statusFilter]="statusFilter"
    [startDate]="startDate"
    [endDate]="endDate"
    [showFilters]="showFilters"
    [showOldOrders]="showOldOrders"
    [minDate]="minDate"
    [maxDate]="maxDate"
    (filteredOrdersChanged)="onFilteredOrdersChanged($event)">
  </app-ride-filter-panel>

  <div *ngIf="loading" class="loading-spinner">
    <i class="pi pi-spin pi-spinner" style="font-size: 2rem; color: #942222;"></i>
    <p>טוען נסיעות...</p>
  </div>

  <app-ride-list-table
    *ngIf="!loading"
    [filteredOrders]="filteredOrders"
    [loading]="loading"
    [highlightedOrderId]="highlightedOrderId"
    [allOrders]="orders"
    [ordersPerPage]="ordersPerPage"
    (viewRide)="onViewRide($event)"
    (editRide)="onEditRide($event)"
    (deleteRide)="onDeleteRide($event)"
    (newRide)="goToNewRide()">
  </app-ride-list-table>
</div>